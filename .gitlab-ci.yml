image: docker:23.0.2

services:
  - name: docker:23.0.2-dind
    alias: docker
    command: ["--tls=false", "--host=tcp://0.0.0.0:2375", "--storage-driver=overlay2"]

stages:
  - test

variables:
  DOCKER_HOST: "tcp://docker:2375"
  DOCKER_DRIVER: overlay2
  DOCKER_TLS_CERTDIR: ""

test-dind:
  stage: test
  script:
    - echo "Testing Docker-in-Docker..."
    - docker info     
    - docker run hello-world
  only:
    - maste
